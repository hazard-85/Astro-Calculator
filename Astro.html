<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BKN Astro Calculator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f9fafb;
      color: #111;
      margin: 0;
      padding: 20px;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
    }
    h1 {
      color: #2563eb;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 20px;
    }
    nav button {
      padding: 10px 15px;
      background-color: #3b82f6;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .section {
      display: none;
    }
    .active {
      display: block;
    }
    .input-group {
      margin-bottom: 10px;
    }
    .input-group input {
      width: 60px;
      margin: 2px;
      padding: 5px;
    }
    .result {
      background: #e0f2fe;
      padding: 10px;
      border-radius: 5px;
      margin-top: 10px;
    }
    footer {
      text-align: center;
      margin-top: 40px;
      color: #666;
    }
  </style>
</head>
<body>
  <header>
    <h1>BKN Astro Calculator</h1>
    <nav>
      <button onclick="showSection('graha')">Graha Ispaṣṭa</button>
      <button onclick="showSection('chandra')">Chandra Ispaṣṭa</button>
      <button onclick="showSection('astro')">Astro Calculator</button>
    </nav>
  </header>

  <section id="graha" class="section active">
    <h3>📅 Today’s Ispaṣṭa</h3>
    <div class="input-group">
      Rāśi: <input id="todayR"> Aṁśa: <input id="todayA"> Kāla: <input id="todayK"> Vikāla: <input id="todayV">
    </div>
    <h3>📅 Tomorrow’s Ispaṣṭa</h3>
    <div class="input-group">
      Rāśi: <input id="tomorrowR"> Aṁśa: <input id="tomorrowA"> Kāla: <input id="tomorrowK"> Vikāla: <input id="tomorrowV">
    </div>
    <h3>🕒 Iṣṭa Kāla</h3>
    <div class="input-group">
      Kāla: <input id="istaK"> Vikāla: <input id="istaV">
    </div>
    <button onclick="calculateGrahaIspasta()">🔁 Calculate Graha Ispaṣṭa</button>
    <div class="result" id="grahaResult">🪐 Result will appear here.</div>
  </section>

  <section id="chandra" class="section">
    <h3>🌙 Chandra Ispaṣṭa</h3>
    <div class="input-group">
      Bhayat: <input id="bhG"> Ghadi <input id="bhP"> Pala <input id="bhB"> Bipala
    </div>
    <div class="input-group">
      Bhabhog: <input id="bhogG"> Ghadi <input id="bhogP"> Pala <input id="bhogB"> Bipala
    </div>
    <div class="input-group">
      Gata Nakṣatra: <input id="nakshatra">
    </div>
    <button onclick="calculateChandra()">🔁 Calculate Chandra Ispaṣṭa</button>
    <div class="result" id="chandraResult">🌙 Result will appear here.</div>
  </section>

  <section id="astro" class="section">
    <h3>🧮 Astro Degree Calculator (Subtract)</h3>
    <div class="input-group">
      First Value → R: <input id="val1R"> A: <input id="val1A"> K: <input id="val1K"> V: <input id="val1V">
    </div>
    <div class="input-group">
      Second Value → R: <input id="val2R"> A: <input id="val2A"> K: <input id="val2K"> V: <input id="val2V">
    </div>
    <button onclick="astroSubtract()">➖ Subtract</button>
    <div class="result" id="astroResult">📐 Result will appear here.</div>
  </section>

  <footer>Made by Balkrishna © 2025</footer>

  <script>
    function showSection(id) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function dmsvToVikala(r, a, k, v) {
      return (((r * 30 + a) * 60 + k) * 60 + v);
    }
    function vikalaToDMSV(v) {
      const totalMinutes = Math.floor(v / 60);
      const vikala = v % 60;
      const kala = totalMinutes % 60;
      const totalAmsa = Math.floor(totalMinutes / 60);
      const amsa = totalAmsa % 30;
      const rashi = Math.floor(totalAmsa / 30);
      return [rashi, amsa, kala, vikala];
    }

    function calculateGrahaIspasta() {
      let t = dmsvToVikala(
        +document.getElementById('todayR').value,
        +document.getElementById('todayA').value,
        +document.getElementById('todayK').value,
        +document.getElementById('todayV').value
      );
      let tm = dmsvToVikala(
        +document.getElementById('tomorrowR').value,
        +document.getElementById('tomorrowA').value,
        +document.getElementById('tomorrowK').value,
        +document.getElementById('tomorrowV').value
      );
      let ista = (+document.getElementById('istaK').value) * 60 + (+document.getElementById('istaV').value);
      let diff = tm - t;
      let mult = Math.floor(Math.abs(diff) * ista / 3600);
      let result = diff >= 0 ? t + mult : t - mult;
      let [r, a, k, v] = vikalaToDMSV(result);
      document.getElementById('grahaResult').innerText = `🪐 Graha Ispaṣṭa: Rāśi: ${r}, Aṁśa: ${a}, Kāla: ${k}, Vikāla: ${v}`;
    }

    function calculateChandra() {
      const bh = (+document.getElementById('bhG').value) * 3600 + (+document.getElementById('bhP').value) * 60 + (+document.getElementById('bhB').value);
      const bhog = (+document.getElementById('bhogG').value) * 3600 + (+document.getElementById('bhogP').value) * 60 + (+document.getElementById('bhogB').value);
      const nak = +document.getElementById('nakshatra').value;
      const baseDeg = (bh / bhog + nak) * 800; // 13° 20′ = 800 vikala
      let [r, a, k, v] = vikalaToDMSV(baseDeg);
      document.getElementById('chandraResult').innerText = `🌙 Chandra Ispaṣṭa: Rāśi: ${r}, Aṁśa: ${a}, Kāla: ${k}, Vikāla: ${v}`;
    }

    function astroSubtract() {
      const v1 = dmsvToVikala(+document.getElementById('val1R').value, +document.getElementById('val1A').value, +document.getElementById('val1K').value, +document.getElementById('val1V').value);
      const v2 = dmsvToVikala(+document.getElementById('val2R').value, +document.getElementById('val2A').value, +document.getElementById('val2K').value, +document.getElementById('val2V').value);
      const diff = Math.abs(v1 - v2);
      const [r, a, k, v] = vikalaToDMSV(diff);
      document.getElementById('astroResult').innerText = `📐 Difference: ${r} Rāśi, ${a} Aṁśa, ${k} Kāla, ${v} Vikāla`;
    }
  </script>
</body>
</html>
